---
title: Chrome Extension Quickstart
description: Add authentication and user management to your Chrome Extension with Clerk.
---

<TutorialHero
  beforeYouStart={[
    {
      title: "Set up a Clerk application",
      link: "/docs/quickstarts/setup-clerk",
      icon: "clerk",
    }
  ]}
>
  - Scaffold a new application using the Plasmo framework
  - Install `@clerk/chrome-extension`
  - Set your environment variables
  - Add `<ClerkProvider>` to your application
  - Create a header with Clerk components for users to sign in and out
  - Update `<ClerkProvider>` for Chrome Extension navigation
  - Configure a consistent CRX ID
  - Start your application and create a build
  - Load your Chrome Extension into your Chromium-based browser
  - Test your Chrome Extension
</TutorialHero>

<Steps>
  ## Configure your authentication options

  Chrome Extensions can be used just a popup, a side panel, or in conjunction with a web application. Popups and side panels have limited authentication options. [Learn more about what options are available.](/docs/references/chrome-extension/overview#authenication-options)

  This guide will use a popup.

  ## Scaffold a new application using the Plasmo framework

  [Plasmo](https://docs.plasmo.com/framework) is a feature-rich Browser Extension framework that includes hot reloading, creating development and production extension builds easily from the same code, and more.

  Plasmo strongly recommends using `pnpm`, so this guide will only use `pnpm`-based examples.

  The following command will create an application with Tailwind CSS pre-configured and with a `src/` directory. If desired, you can remove one or both of those options.

  ```bash {{ filename: 'terminal' }}
  pnpm create plasmo --with-tailwindcss --with-src chrome-extension
  cd clerk-chrome-extension
  ```

  ## Install `@clerk/chrome-extension`

  Clerk's [Chrome Extension SDK](/docs/references/chrome-extension/overview) gives you access to prebuilt components, React hooks, and helpers to make user authentication easier.

  Add the SDK to your project:

  ```bash {{ filename: 'terminal' }}
  pnpm add @clerk/chrome-extension
  ```

  ## Set your Clerk API keys

  Plasmo offers [several options](https://docs.plasmo.com/framework/env) for environment variable files, as the same codebase can be used for development and production builds, as well as for targeting different browsers. This guide will use `.env.development` and `.env.chrome` files.

  <SignedIn>
    Add the following keys to your `.env.development` file. These keys can always be retrieved from the [API Keys](https://dashboard.clerk.com/last-active?path=api-keys) page of your Clerk Dashboard.
  </SignedIn>

  <SignedOut>
    1. Navigate to the [Clerk Dashboard](https://dashboard.clerk.com/last-active?path=api-keys).
    1. In the navigation sidebar, select **API Keys**.
    1. In the **Quick Copy** section, select **Chrome Extension** and copy your Clerk publishable and frontend API key.
    1. Paste your keys into your `.env.development` file.

    The final result should resemble the following:
  </SignedOut>

  ```env {{ filename: '.env.development' }}
  PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY={{pub_key}}
  CLERK_FRONTEND_API={{fapi_url}}
  ```

  ## Add `<ClerkProvider>` to your app

  All Clerk hooks and components must be children of the [`<ClerkProvider>`](/docs/components/clerk-provider) component, which provides active session and user context.

  To make this data available across your entire app, wrap your app in the `<ClerkProvider>` component. You **must** pass your publishable key as a prop to the `<ClerkProvider>` component.

  ```tsx {{ filename: 'src/popup.tsx', mark: [1, 6, [8, 10], 14, 18] }}
  import { ClerkProvider } from '@clerk/chrome-extension'
  import { CountButton } from '~features/count-button'

  import '~style.css'

  const PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY

  if (!PUBLISHABLE_KEY) {
    throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')
  }

  function IndexPopup() {
    return (
      <ClerkProvider publishableKey={PUBLISHABLE_KEY}>
        <div className="plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-16 plasmo-w-40">
          <CountButton />
        </div>
      </ClerkProvider>
    )
  }
  ```

  ## Create a header with Clerk components

  You can control which content signed in and signed out users can see with Clerk's [prebuilt components](/docs/components/overview). To get started, create a header for your users to sign in or out. With Chrome Extensions, you can also add this logic to a footer. To do this, you will use:

  - [`<SignedIn>`](/docs/components/control/signed-in): Children of this component can only be seen while **signed in**.
  - [`<SignedOut>`](/docs/components/control/signed-out): Children of this component can only be seen while **signed out**.
  - [`<UserButton />`](/docs/components/user/user-button): A prebuilt component that comes styled out of the box to show the avatar from the account the user is signed in with.
  - [`<SignInButton />`](/docs/components/unstyled/sign-in-button): An unstyled component that links to the sign-in page or displays the sign-in modal.

  ```tsx {{ filename: 'src/popup.tsx', mark: [1, [15, 24], 26] }}
  import {
    ClerkProvider,
    SignInButton,
    SignedIn,
    SignedOut,
    UserButton,
  } from '@clerk/chrome-extension'
  import { CountButton } from '~features/count-button'

  import '~style.css'

  const PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY

  if (!PUBLISHABLE_KEY) {
    throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')
  }

  function IndexPopup() {
    return (
      <ClerkProvider publishableKey={PUBLISHABLE_KEY}>
        <div className="plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-[600px] plasmo-w-[800px] plasmo-flex plasmo-flex-col">
          <header className="plasmo-w-full">
            <SignedOut>
              <SignInButton mode="modal" />
            </SignedOut>
            <SignedIn>
              <UserButton />
            </SignedIn>
          </header>
          <main className="plasmo-grow">
            <CountButton />
          </main>
        </div>
      </ClerkProvider>
    )
  }

  export default IndexPopup
  ```

  ## Update `<ClerkProvider>` props for Chrome Extension navigation

  {/* TODO: Alexis, here are some point form notes for you to use in writing this section */}
  - Chrome extensions don't use a URL like `htto://localhost:3000`
  - They have an ID unique to the extension, called a CRX ID
  - This is used with `chrome-extension://` to create an internal URL like `chrome-extension://kleljgkimpmbjddfaljiohjeliodehcp`
  - Use `afterSignOutUrl`, `signInFallbackRedirectUrl` and `signUpFallbackRedirectUrl` with the Extension URL to avoid navigation errors


  ```tsx {{ filename: 'src/popup.tsx', mark: [14, [24,26]] }}
  import {
    ClerkProvider,
    SignInButton,
    SignedIn,
    SignedOut,
    UserButton,
  } from '@clerk/chrome-extension'

  import { CountButton } from "~features/count-button"

  import "~style.css"

  const PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY
  const EXTENSION_URL = chrome.runtime.getURL(".")

  if (!PUBLISHABLE_KEY) {
    throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')
  }

  function IndexPopup() {
    return (
      <ClerkProvider
        publishableKey={PUBLISHABLE_KEY}
        afterSignOutUrl={`${EXTENSION_URL}/popup.html`}
        signInFallbackRedirectUrl={`${EXTENSION_URL}/popup.html`}
        signUpFallbackRedirectUrl={`${EXTENSION_URL}/popup.html`}
      >
        <div className="plasmo-flex plasmo-items-center plasmo-justify-center plasmo-h-[600px] plasmo-w-[800px] plasmo-flex-col">
          <header className="plasmo-w-full">
            <SignedOut>
              <SignInButton mode="modal" />
            </SignedOut>
            <SignedIn>
              <UserButton />
            </SignedIn>
          </header>
          <main className="plasmo-grow">
            <CountButton />
          </main>
        </div>
      </ClerkProvider>
    )
  }

export default IndexPopup
  ```

  ## Create a consistent CRX ID for your extension

  Chrome Extensions have a unique CRX ID that rotates by default, which can cause errors and issues with the Clerk integration. To avoid these problems, ensure that you have a **consistent** CRX ID in both development and production for your extension by following these steps:

  1. Visit Plasmo Itero's [Generate Keypairs](https://itero.plasmo.com/tools/generate-keypairs) tool.
  1. Select the **Generate KeyPairs** button.
  1. Save the private key somewhere safe in case you need it in the future. Save the public key for use in the next step, and the CRX ID for use in a later step.

  ### Create an `.env.chrome` file to store your public key

  Create an `.env.chrome` file and add your public key to it.

  ```env {{ filename: '.env.chrome' }}
  CRX_PUBLIC_KEY="<PUBLIC KEY>"
  ```

  ### Edit your `package.json` to use the new public key

  If you were building an extension from scratch or using other tools, you would need to maintain a `manifest.json` file, and potentially modify it for development and production. Plasmo uses the `package.json` to generate a `manifest.json` on build, and allows for the use of environment variables in `package.json`.

  In your `package.json`, add `"key": "$CRX_PUBLIC_KEY"` to the `manifest` object, as shown in the following example:

  {/* TODO: Additionally need to set the `permissions`, and set/update `host_permissions` as shown below */}

  ```json {{ filename: 'package.json', mark: [33] }}
  {
    "name": "chrome-extension",
    "displayName": "Chrome extension",
    "version": "0.0.1",
    "description": "A basic implementation of Clerk with a Plasmo-based Chrome Extension.",
    "author": "Clerk",
    "scripts": {
      "dev": "plasmo dev",
      "build": "plasmo build",
      "package": "plasmo package"
    },
    "dependencies": {
      "@clerk/chrome-extension": "1.1.5-snapshot.va3e1056",
      "plasmo": "0.88.0",
      "react": "18.2.0",
      "react-dom": "18.2.0",
      "tailwindcss": "3.4.1"
    },
    "devDependencies": {
      "@ianvs/prettier-plugin-sort-imports": "4.1.1",
      "@types/chrome": "0.0.258",
      "@types/node": "20.11.5",
      "@types/react": "18.2.48",
      "@types/react-dom": "18.2.18",
      "postcss": "8.4.33",
      "prettier": "3.2.4",
      "typescript": "5.3.3"
    },
    "manifest": {
      "permissions": [
        "cookies",
        "storage"
      ],
      "host_permissions": [
        "http://localhost/*",
        "$CLERK_FRONTEND_API/*"
      ],
      "key": "$CRX_PUBLIC_KEY"
    }
  }
  ```
{/* TODO: Moved the `pnpm dev` command here, as Plasmo does not read changes to the .env* files */}
  ## Use `pnpm dev` to start your development server and create a build

  Plasmo facilitates Chrome Extension development by automatically "hot loading" the application whenever you save a changed file in the project. This ensures the `build/chrome-mv3-dev` folder remains up to date. Without the plugin, you would need to manually execute the build command and reload your Chrome Extension after each change. Plasmo automates this process, streamlining development.

  Run the following command to start your development enivronment. This will also create the build in `build/chrome-mv3-dev`, and rebuild it when you make changes to the extension.

  ```bash {{ filename: 'terminal' }}
  pnpm dev
  ```

  ## Load your Chrome Extension into your Chromium-based browser

  With your application running, please do the following:

  1. Open Chrome or a Chromium-based browser and navigate to `chrome://extensions`.
  1. Locate the **Developer mode** toggle, which is usually in the upper right corner, and enable it.
  1. Select the **Load unpacked** button, which is usually in the upper left corner.
  1. Navigate to where your project is located and select the `build/chrome-mv3-dev` folder. Then select the **Select** button.
  1. Your extension will now be loaded and shown in the list of extensions on the `chrome://extensions` page.

  ## Confirm your extension key is correctly configured

  When you generated your CRX Keys previously, you saved a CRX ID. With the extension now loaded in your browser, in the `chrome://extensions` screen locate your extension. In the information there will be a `ID` field. Confirm that the CRX ID displayed there matches the CRX ID you saved from the previous step. If they match then you will have a consistent key for your extension.

  ## Test your Chrome Extension

  In your Chrome browser, open the extension popup. Ensure that the `<SignIn />` button appears, and that selecting it opens the Clerk sign-in modal. Sign in and ensure that the `<UserButton />` appears in the header.

  > [!WARNING]
  > After signing up or signing in your popup may appear to crash. Closing and reopening the popup should restart the extension and you should be signed in.
  >
  > Your extension does not yet have anything to handle routing, and the Clerk components by default attempt to redirect the user. See the 'Nesxt Steps' for our Chrome Extension React Router guide to resolve this.

  ## Next Steps

  Developing a Chrome Extension poses several challenges. We have provided guides to help overcome those, and encourage you to go through each of them.

  1. [Add React Router](/docs/references/chrome-extension/add-react-router)
  1. [Enable Sync Host](/docs/references/chrome-extension/sync-host-configuration)
</Steps>
