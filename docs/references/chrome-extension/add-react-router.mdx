---
title: Add React Router to your Clerk-powered Chrome Extension
description: Learn how to add React Router to your React application using their Data API router.
---

<TutorialHero
  framework="reactrouter"
  exampleRepo={[
    {
      title: "Clerk Chrome Extension Repo",
      link: "https://github.com/clerk/clerk-chrome-extension-quickstart"

    }
  ]}
  beforeYouStart={[
    {
      title: "Set up a Clerk application",
      link: "https://clerk.com/docs/quickstarts/setup-clerk",
      icon: "clerk"
    },
    {
      title: "Add authentication and user management to your Chrome Extension with Clerk",
      link: "https://clerk.com/docs/quickstarts/chrome-extension",
      icon: "react"
    },
  ]}
>
- Install `react-router-dom`
- Create components for your routes
- Create layouts
- Wire layouts and routes up with `createMemoryRouter`
</TutorialHero>

# Add React Router to your Clerk-powered Chrome Extension

Learn how to add React Router to your application using React Router's new Data API router. This tutorial will cover configuring layouts and setting up protected routes.

<Steps>

### Install `react-router-dom`

React Router's `react-router-dom` is a mature, battle tested routing package for React that gives you many options. As it is the most popular routing option, it will be used for this guide.

<CodeBlockTabs type="installer" options={["npm", "pnpm", "yarn" ]}>
  ```bash filename="terminal"
  npm install react-router-dom
  ```

  ```bash filename="terminal"
  pnpm add react-router-dom
  ```

  ```bash filename="terminal"
  yarn add react-router-dom
  ```
</CodeBlockTabs>

### Create a `src/popup` folder

In the `src/` directory, create a `popup/` directory. Once done, move `src/popup.tsx` to `src/popup/index.tsx`.

Plasmo will recognize the `src/popup` directory and the `src/popup/index.tsx` file and use that for your extension popup. Creating this directory will help keep the extension organized and in the next steps you will create directories and files inside of `/src/popup`.

### Create components for your routes

The exact routes you will need depends on your application. For this guide, you will create `/`, `/sign-in`, `/sign-up`, and `/settings` routes.

Use the tabs below to find the example components and recreate these files using the path from each tab.

<CodeBlockTabs options={["Index", "Sign-in", "Sign-up", "Settings"]}>

```tsx filename="src/popup/routes/index.tsx"
import { Link } from "react-router-dom";

export const Index = () => {
  return (
    <>
      <h1>Clerk + Chrome Extension + React Router</h1>
    </>
  );
};
```

```tsx filename="src/popup/routes/sign-in.tsx"
import { SignIn } from "@clerk/chrome-extension";

export const SignInPage = () => {
  return (
    <>
      <p>Sign In</p>
      <SignIn routing="virtual" />
    </>
  );
};
```

```tsx filename="src/popup/routes/sign-up.tsx"
import { SignUp } from "@clerk/chrome-extension";

export const SignUpPage = () => {
  return (
    <>
      <p>Sign Up</p>
      <SignUp routing="virtual" />
    </>
  );
};
```

```tsx filename="src/popup/routes/settings.tsx"
import { UserProfile } from "@clerk/chrome-extension";

export const Settings = () => {
  return (
    <>
      <h1>Settings</h1>
      <UserProfile routing="virtual" />
    </>
  );
};
```
</CodeBlockTabs>

### Create layouts

1. In your `src/` folder, create a new folder called `layouts`.
1. Inside the `layouts/` folder, create a new file called `root-layout.tsx`.
1. Add the following code to your application to create a layout for your application.

<CodeBlockTabs options={["Root Layout"]}>

```tsx filename="src/popup/layouts/root-layout.tsx"
import { Link, Outlet, useLocation, useNavigate } from "react-router-dom";
import {
  ClerkProvider,
  SignedIn,
  SignedOut,
  UserButton,
} from "@clerk/chrome-extension";

const PUBLISHABLE_KEY = process.env.PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY

if (!PUBLISHABLE_KEY) {
  throw new Error('Please add the PLASMO_PUBLIC_CLERK_PUBLISHABLE_KEY to the .env.development file')
}

export const RootLayout = () => {
  const navigate = useNavigate();
  const location = useLocation();

  console.log("location", location);
  return (
    <ClerkProvider
      routerPush={(to) => navigate(to)}
      routerReplace={(to) => navigate(to, { replace: true })}
      publishableKey={PUBLISHABLE_KEY}
      afterSignOutUrl="/"
    >
      <div className="plasmo-w-[785px] plasmo-h-[600px]">
        <main>
          <Outlet />
        </main>
        <footer>
          <SignedIn>
            <Link to="/settings">Settings</Link>
            <UserButton />
          </SignedIn>
          <SignedOut>
            <Link to="/">Home</Link>
            <Link to="/sign-in">Sign In</Link>
            <Link to="/sign-up">Sign Up</Link>
          </SignedOut>
        </footer>
      </div>
    </ClerkProvider>
  );
};
```
</CodeBlockTabs>

#### Key Takeaways

- The new `root-layout.tsx` has a simple footer that includes the `<UserButton />` and a link to the `/settings` page, which renders the `<UserProfile />`. The rendering of these is controlled by the `<SignedIn>` and `<SignedOut>` control components.
- The layout contains an `<Outlet />` component from `react-router-dom`. This behaves similar to `{children}` in Next.js or more generic React components. You will take advantage of this component in the next step.

### Wire layouts and routes up with `createMemoryRouter`

With all the routes and layouts you need created, you now need to wire up the layouts and the routes with the `createMemoryRouter` function from `react-router-dom`.

1. Remove `src/App.tsx` â€” the contents of that file were moved to `src/layouts/root-layout.tsx`.
1. In `src/main.tsx`, paste the following code to create the router and render the application.

```ts filename="src/main.tsx"
import React from "react";
import "../style.css";
import { RouterProvider, createMemoryRouter } from "react-router-dom";

// Import the layouts
import { RootLayout } from "./layouts/root-layout";

// Import the components
import { SignInPage } from "./routes/sign-in";
import { SignUpPage } from "./routes/sign-up";
import { Index } from "./routes";
import { Settings } from "./routes/settings";

// Create the router
// This removes the need for an App.tsx file
const router = createMemoryRouter([
  {
    element: <RootLayout />,
    children: [
      { path: "/", element: <Index /> },
      { path: "/sign-in", element: <SignInPage /> },
      { path: "/sign-up", element: <SignUpPage /> },
      { path: "/settings", element: <Settings /> },
    ],
  },
]);

export default function PopupIndex() {
  return (
    <RouterProvider router={router} />
  )
}
```

Run your app, visit [`http://localhost:5173`](http://localhost:5173), and explore your app's pages.

#### Key Takeaways

- The top most object in the `router` is the `<RootLayout />` component, and everything else is a child. Any child route will be mounted where the `<Outlet />` component is inside the root layout. This wraps the entire application with `<ClerkProvider>` and allows you to add a header, footer, sidebars and other pieces that will be available to the entire application.
- Several routes are direct children of the root layout. These are all public routes. You can use control components like `<SignedIn>` or check the `userId` from `useAuth()` if you want to make content protected.
- The `<DashboardLayout />` is child of the root layout, renders nothing, and has a check to see if the `userId` exists. This will confirm that a user is signed in. If the `userId` is not truthy, then the user will be redirected to the `/sign-in` route to sign-in. That protects all pages in the `/dashboard` route. All children of `/dashboard` will be mounted inside of the `<Outlet />` component in the dashboard layout.

</Steps>

Your application is setup with `react-router-dom` and ready for you to add more layouts and routes as needed!
