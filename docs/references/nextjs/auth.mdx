---
title: '`auth()`'
description: Access minimal authentication data for managing sessions and data fetching.
---

The `auth()` helper returns the [`Auth`](/docs/references/nextjs/auth-object) object of the currently active user. This is the same `Auth` object that is returned by the [`getAuth()`](/docs/references/nextjs/get-auth) hook. However, it can be used in Server Components, Route Handlers, and Server Actions.

The `auth()` helper requires [Middleware](/docs/references/nextjs/clerk-middleware). It is only available for App Router, and only works on the server-side.

## Returns

`auth()` returns the [`Auth`](/docs/references/nextjs/auth-object) object with a few extra properties:

- [`redirectToSignIn()`](#redirect-to-sign-in)

### `auth.protect()`

You can use the `auth.protect()` helper in two ways:

- to check if a user is authenticated (signed in)
- to check if a user is authorized (has the correct roles or permissions) to access something, such as a component or a route handler

The following table describes how the `auth.protect()` helper behaves based on user authentication or authorization status:

| Authenticated | Authorized | `auth.protect()` will |
| - | - | - |
| Yes | Yes | Return the [`Auth`](/docs/references/nextjs/auth-object) object. |
| Yes | No | Return a `404` error. |
| No | No | Redirect the user to the sign-in page\*. |

> [!IMPORTANT]
> \*For non-document requests, such as API requests, `auth.protect()` returns a `404` error to users who aren't authenticated.

`auth.protect()` accepts the following parameters:

<Properties>
  - `role?`
  - `string`

  The role to check for.

  ---

  - `permission?`
  - `string`

  The permission to check for.

  ---

  - `has?`
  - `(isAuthorizedParams: CheckAuthorizationParamsWithCustomPermissions) => boolean`

  A function that returns a boolean based on the permission or role provided as parameter. Can be used for authorization. See [the dedicated `has()` section](/docs/references/nextjs/auth-object#has) for more information.

  ---

  - `unauthorizedUrl?`
  - `string`

  The URL to redirect the user to if they are not authorized.

  ---

  - `unauthenticatedUrl?`
  - `string`

  The URL to redirect the user to if they are not authenticated.
</Properties>

For more information on how to use `auth.protect()`, see the [examples](#use-auth-to-check-if-a-user-is-authenticated) in this guide. There are also examples in the [Verify user permissions](/docs/organizations/verify-user-permissions) guide.

### `redirectToSignIn()`

`redirectToSignIn()` is a method that redirects the user to the sign-in page. It accepts the following parameters:

<Properties>
  - `returnBackUrl?`
  - `string | URL`

  The URL to redirect the user back to after they sign in.
</Properties>

> [!NOTE]
> `auth()` on the server-side can only access redirect URLs defined via [environment variables](/docs/deployments/clerk-environment-variables#sign-in-and-sign-up-redirects) or [`clerkMiddleware` dynamic keys](/docs/references/nextjs/clerk-middleware#dynamic-keys).

## Use `auth()` to retrieve `userId`

You can use `auth()` to check if a `userId` exists. If it does not, that means there is no user signed in. You can use this information to protect pages, as shown in the following example:

```tsx {{ filename: 'app/page.tsx' }}
import { auth } from '@clerk/nextjs/server'

export default async function Page() {
  const { userId }: { userId: string | null } = await auth()

  if (!userId) return null

  return <h1>Hello, {userId}</h1>
}
```

## Use `auth()` for data fetching

When using a Clerk integration, or if you need to send a JWT along to a server, you can use the `getToken()` function that is returned by `auth()`.

```tsx {{ filename: 'app/api/example/route.ts' }}
import { auth } from '@clerk/nextjs/server'

export async function GET() {
  const { userId, getToken } = await auth()

  if (!userId) {
    return new Response('User is not signed in.', { status: 401 })
  }

  try {
    const token = await getToken({ template: 'supabase' })

    // Add logic here to fetch data from Supabase and return it.

    const data = { supabaseData: 'Hello World' }

    return Response.json({ data })
  } catch (error) {
    return Response.json(error)
  }
}
```

## Use `auth.protect()` to check if a user is authenticated

`auth.protect()` can be used in a `page.tsx` file to protect any page in your application.

In the following example,

- the `auth.protect()` helper is used to check if a user visiting the `/dashboard` route is authenticated.
- If the user is not authenticated, they will be redirected to the sign-in route.
- If the user is authenticated, `auth.protect()` returns the user's `userId`, and they can view the `/dashboard` page.

```tsx {{ filename: 'app/dashboard/page.tsx' }}
import { auth } from '@clerk/nextjs/server'

export default async function Page() {
  const { userId } = await auth.protect()

  return <h1>Welcome, {userId}</h1>
}
```

## Use `auth()` to check if a user is authorized

`auth()` returns the [`Auth`](/docs/references/nextjs/auth-object#auth-object) object, which includes the [`has()`](/docs/references/nextjs/auth-object#has) helper.

You can protect certain parts of your application or even entire routes based on a user's authorization status by checking if the user has the required permissions or roles. Learn more about authorization checks in [the dedicated guide](/docs/organizations/verify-user-permissions).

- Use `auth.protect()` if you want Clerk to return a `404` if the user does not have the role or permission.
- Use `has()` if you want more control over what your app does based on the authorization status instead of immediately returning a `404`.

<Tabs items={["has()", "auth.protect()"]}>
  <Tab>
    The following example uses `has()` to protect a pages content from unauthorized access.

    - If the user does not have the permission, `has()` will return `false`, causing the component to return `null`.
    - If the user has the permission, `has()` will return `true`, allowing the component to render its children.

    ```tsx {{ filename: 'app/team-settings/page.tsx' }}
    import { auth } from '@clerk/nextjs/server'

    export default async function Page() {
      const { has } = await auth()

      // Check if the user is authorized
      const canManage = has({ permission: 'org:team_settings:manage' })

      // If has() returns false, the user does not have the correct permissions
      // You can choose how your app responds. This example returns null.
      if (!canManage) return null

      // If the user is both authenticated and authorized, move forward with your logic
      return <h1>Team Settings</h1>
    }
    ```
  </Tab>

  <Tab>
    The following example uses `auth.protect()` to protect a Next.js Route Handler from unauthenticated and unauthorized access.

    - If the user is not authenticated, `auth.protect()` will redirect the user to the sign-in route.
    - If the user is authenticated but is not authorized (as in, does not have the `org:team_settings:manage` permission), `auth.protect()` will throw a `404` error.
    - If the user is both authenticated and authorized, `auth.protect()` will return the user's `userId`.

    ```tsx {{ filename: 'app/api/create-team/route.ts' }}
    import { auth } from '@clerk/nextjs/server'

    export const POST = async () => {
      // Check if the user is authorized
      const { userId } = await auth.protect({ permission: 'org:team_settings:manage' })

      // If the user is both authenticated and authorized, move forward with your logic
      return users.createTeam(userId)
    }
    ```
  </Tab>
</Tabs>

## Use `auth()` to check your current user's role

In some cases, you need to check your user's current organization role before displaying data or allowing certain actions to be performed.

Check the current user's role with the `orgRole` property of the `Auth` object returned by `auth()`, as shown in the following example:

```tsx {{ filename: 'app/page.tsx' }}
import { auth } from '@clerk/nextjs/server'

export default async function Page() {
  const { orgRole } = await auth()

  return (
    <>
      <div>Your current role is {orgRole}</div>
    </>
  )
}
```
